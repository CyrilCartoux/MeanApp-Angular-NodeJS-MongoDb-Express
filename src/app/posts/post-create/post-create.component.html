<mat-card>
    <mat-spinner *ngIf="isLoading"></mat-spinner>
    <form *ngIf="!isLoading" [formGroup]="postCreateForm" (submit)='onSavePost()'>
        <mat-form-field>
            <input formControlName="title" matInput type=text name="title" required placeholder="Post title">
            <mat-error *ngIf="postCreateForm.get('title').invalid"> Please enter a title</mat-error>
        </mat-form-field>
        <div>
            <button mat-stroked-button color='primary' type="button" (click)="filePicker.click()">Pick Image</button>
            <input type="file" #filePicker (change)=onImagePicked($event)>
        </div>
        <div *ngIf="imagePreview.length > 0 && postCreateForm.get('image').valid" class="image-preview">
            <img [src]='imagePreview' [alt]="postCreateForm.value.image.name">
        </div>
        <mat-form-field>
            <textarea formControlName='content' matInput rows="6" placeholder="Post content" name="content"></textarea>
            <mat-error *ngIf="postCreateForm.get('content').invalid"> Please enter content</mat-error>
        </mat-form-field>
        <button type="submit" color='accent' mat-raised-button>Save Post</button>
    </form>
</mat-card>